# CONFIG.SYS

* CTTY
  * `CTTY=`で標準入力、標準出力、標準エラー出力がAUXに切り替わる。
  * `=`も書く必要があるが、右辺は無視される(何を書いても有効になる)。`=`の前にタブやスペースがあってもよい。
* EXCONFIG
  * 実行直前に、Human68kのメモリブロック末尾の設定とスーパーバイザ領域の設定が行われる
    (これによりDOS \_MALLOCやDOS \_EXECなどが使える状態になる)。
  * 事前に512バイトのメモリが確保され、実行後に解放される。内容は以下のとおり。
    |offset|サイズ|初期値|内容|
    |-|-|-|-|
    |+0|1.l|64|環境変数領域の大きさ|
    |+4|64.b|`path=\;\sys;\bin;\basic2;\etc;\shell`|環境変数|
    |+68|60.b||空き|
    |+128|256.b||コマンドライン|
    |+384|128.b||ユーザースタック|
    * コマンドラインの最大使用量は256バイトより小さく(CONFIG.SYSの一行の最大長が200バイト、かつ`EXCONFIG = 実行ファイル名 `
      の部分が差し引かれるという理由による)、また引数列が短ければ使用量も小さくなり、その分だけユーザースタックの実質的な容量は多くなる。
  * 環境変数領域が用意されるのは、環境変数領域が存在しないとXCライブラリのスタートアップルーチン内でアドレスエラーが発生するので
    その対策と思われる。
  * 実行時にはカーソル点滅が許可され、実行後に禁止される。
  * プログラムが常駐終了するとエラーメッセージが表示され、停止する。
  * プログラムの終了コードが`0`の場合、以後はCONFIG.SYSの代わりにCONFIG.**TMP**を読み込むようになる。
* [USKCG](uskcg/README.md)


----
goto [index](../../README.md) / [Human68k](../README.md)
